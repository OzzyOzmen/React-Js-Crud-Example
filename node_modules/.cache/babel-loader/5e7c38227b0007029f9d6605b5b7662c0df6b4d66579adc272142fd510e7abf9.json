{"ast":null,"code":"var _jsxFileName = \"/Users/ozzyozmencelik/Projects/reactapirequests/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport UserForm from './UserForm'; // Import UserForm if in a separate file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FetchingData() {\n  _s();\n  const [datas, setDatas] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [formData, setFormData] = useState({});\n\n  // Fetch existing data\n  useEffect(() => {\n    axios.get('http://localhost:8000/user/').then(response => {\n      setDatas(response.data);\n    }).catch(err => console.error('Failed to fetch data:', err));\n  }, []);\n\n  // Function to add a new user\n  const addNewUser = () => {\n    setSelectedUser(null); // Reset selectedUser state\n    setFormData({}); // Reset formData state\n  };\n\n  // Add new user or update existing user\n  const saveUser = e => {\n    e.preventDefault();\n    const isNewUser = !selectedUser;\n    const url = isNewUser ? 'http://localhost:8000/user/' : `http://localhost:8000/user/${selectedUser.id}/`;\n    const method = isNewUser ? 'post' : 'put';\n    axios({\n      method,\n      url,\n      data: {\n        ...formData,\n        id: isNewUser ? datas.reduce((maxId, data) => Math.max(maxId, data.id), 0) + 1 : selectedUser.id,\n        updated_at: isNewUser ? null : new Date().toISOString()\n      }\n    }).then(response => {\n      const user = response.data;\n      if (isNewUser) {\n        console.log('New user added:', user);\n        // Add the new user to the data list\n        setDatas([...datas, user]);\n      } else {\n        console.log('User updated:', user);\n        // Update the user in the data list\n        setDatas(datas.map(data => data.id === selectedUser.id ? user : data));\n      }\n\n      // Reset the form\n      setSelectedUser(null);\n      setFormData({});\n    }).catch(err => console.error(`Failed to ${method === 'post' ? 'add' : 'update'} user:`, err));\n  };\n\n  // Delete a user\n  const deleteUser = userId => {\n    axios.delete(`http://localhost:8000/user/${userId}/`).then(() => {\n      console.log(`User with ID ${userId} deleted.`);\n      // Remove the deleted user from the data list\n      setDatas(datas.filter(data => data.id !== userId));\n    }).catch(err => console.error(`Failed to delete user with ID ${userId}:`, err));\n  };\n\n  // Prepare form data for editing a user\n  const handleEditButtonClick = user => {\n    setSelectedUser(user);\n    setFormData({\n      name: user.name,\n      username: user.username,\n      password: user.password,\n      email: user.email,\n      phone: user.phone,\n      address: user.address,\n      city: user.city,\n      zipcode: user.zipcode,\n      company: user.company,\n      website: user.website,\n      role: user.role\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: 'center'\n      },\n      children: \"CRUD Data Process\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: datas.map(data => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [data.id, \" - \", data.username, \" - \", data.name, \" - \", data.password, \" - \", data.email, \" - \", data.phone, \" - \", data.address, \", \", data.city, \", \", data.zipcode, \" - \", data.company, \" - \", data.website, \" - \", data.role, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleEditButtonClick(data),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteUser(data.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: addNewUser,\n      style: {\n        marginBottom: '20px'\n      },\n      children: \"Add New User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), selectedUser !== null || Object.keys(formData).length > 0 ? /*#__PURE__*/_jsxDEV(UserForm, {\n      formData: formData,\n      setFormData: setFormData,\n      handleSubmit: saveUser,\n      selectedUser: selectedUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n}\n_s(FetchingData, \"HVP5MFUQ3pICnftXf3YBcH2/2Co=\");\n_c = FetchingData;\nexport default FetchingData;\nvar _c;\n$RefreshReg$(_c, \"FetchingData\");","map":{"version":3,"names":["React","useState","useEffect","axios","UserForm","jsxDEV","_jsxDEV","FetchingData","_s","datas","setDatas","selectedUser","setSelectedUser","formData","setFormData","get","then","response","data","catch","err","console","error","addNewUser","saveUser","e","preventDefault","isNewUser","url","id","method","reduce","maxId","Math","max","updated_at","Date","toISOString","user","log","map","deleteUser","userId","delete","filter","handleEditButtonClick","name","username","password","email","phone","address","city","zipcode","company","website","role","style","display","flexDirection","alignItems","children","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","onClick","marginBottom","Object","keys","length","handleSubmit","_c","$RefreshReg$"],"sources":["/Users/ozzyozmencelik/Projects/reactapirequests/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport UserForm from './UserForm'; // Import UserForm if in a separate file\n\nfunction FetchingData() {\n    const [datas, setDatas] = useState([]);\n    const [selectedUser, setSelectedUser] = useState(null);\n    const [formData, setFormData] = useState({});\n\n    // Fetch existing data\n    useEffect(() => {\n        axios.get('http://localhost:8000/user/')\n            .then(response => {\n                setDatas(response.data);\n            })\n            .catch(err => console.error('Failed to fetch data:', err));\n    }, []);\n\n    // Function to add a new user\n    const addNewUser = () => {\n        setSelectedUser(null); // Reset selectedUser state\n        setFormData({}); // Reset formData state\n    };\n\n    // Add new user or update existing user\n    const saveUser = (e) => {\n        e.preventDefault();\n\n        const isNewUser = !selectedUser;\n        const url = isNewUser ? 'http://localhost:8000/user/' : `http://localhost:8000/user/${selectedUser.id}/`;\n        const method = isNewUser ? 'post' : 'put';\n\n        axios({\n            method,\n            url,\n            data: {\n                ...formData,\n                id: isNewUser ? datas.reduce((maxId, data) => Math.max(maxId, data.id), 0) + 1 : selectedUser.id,\n                updated_at: isNewUser ? null : new Date().toISOString(),\n            },\n        })\n        .then(response => {\n            const user = response.data;\n\n            if (isNewUser) {\n                console.log('New user added:', user);\n                // Add the new user to the data list\n                setDatas([...datas, user]);\n            } else {\n                console.log('User updated:', user);\n                // Update the user in the data list\n                setDatas(datas.map(data => data.id === selectedUser.id ? user : data));\n            }\n            \n            // Reset the form\n            setSelectedUser(null);\n            setFormData({});\n        })\n        .catch(err => console.error(`Failed to ${method === 'post' ? 'add' : 'update'} user:`, err));\n    };\n\n    // Delete a user\n    const deleteUser = (userId) => {\n        axios.delete(`http://localhost:8000/user/${userId}/`)\n            .then(() => {\n                console.log(`User with ID ${userId} deleted.`);\n                // Remove the deleted user from the data list\n                setDatas(datas.filter(data => data.id !== userId));\n            })\n            .catch(err => console.error(`Failed to delete user with ID ${userId}:`, err));\n    };\n\n    // Prepare form data for editing a user\n    const handleEditButtonClick = (user) => {\n        setSelectedUser(user);\n        setFormData({\n            name: user.name,\n            username: user.username,\n            password: user.password,\n            email: user.email,\n            phone: user.phone,\n            address: user.address,\n            city: user.city,\n            zipcode: user.zipcode,\n            company: user.company,\n            website: user.website,\n            role: user.role,\n        });\n    };\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n            <h1 style={{ textAlign: 'center' }}>CRUD Data Process</h1>\n            <ul>\n                {datas.map((data) => (\n                    <li key={data.id}>\n                        {data.id} - {data.username} - {data.name} - {data.password} - {data.email} - {data.phone} - {data.address}, {data.city}, {data.zipcode} - {data.company} - {data.website} - {data.role}\n                        {/* Edit button */}\n                        <button onClick={() => handleEditButtonClick(data)}>Edit</button>\n                        {/* Delete button */}\n                        <button onClick={() => deleteUser(data.id)}>Delete</button>\n                    </li>\n                ))}\n            </ul>\n            {/* Button to add a new user */}\n            <button onClick={addNewUser} style={{ marginBottom: '20px' }}>Add New User</button>\n\n            {/* Render form for updating or adding a user */}\n            {selectedUser !== null || Object.keys(formData).length > 0 ? (\n                <UserForm formData={formData} setFormData={setFormData} handleSubmit={saveUser} selectedUser={selectedUser} />\n            ) : null}\n        </div>\n    );\n}\n\nexport default FetchingData;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}